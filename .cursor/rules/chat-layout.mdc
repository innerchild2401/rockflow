---
description: Chat layout â€” only message list scrolls, input sticky at bottom
globs: 
  - "**/CompanyFeed.tsx"
  - "**/TaskChat.tsx"
  - "**/TaskPageLayout.tsx"
  - "**/CompanyPageLayout.tsx"
  - "**/ChatClient.tsx"
  - "**/chat/page.tsx"
---

# Chat layout (mobile and desktop)

- **Only the chat message list should be scrollable.** Headers, filters, and any bars above the list must not scroll; use `shrink-0` and keep the scroll container as a single `flex-1 min-h-0 overflow-y-auto` (or equivalent) wrapper around the messages.
- **Text input must stay sticky at the bottom.** Use `shrink-0` on the input/form container so it does not shrink and remains anchored at the bottom of the chat panel.
- **Container:** The chat panel (card or wrapper) must be `flex flex-col overflow-hidden` (and `min-h-0` / `flex-1` where it lives in a flex parent) so that only the inner scroll div scrolls, not the whole panel.
- **Desktop grids:** When chat is in a two-column layout (e.g. Recap|Feed or Details|Chat), use `grid-rows-1`, `overflow-hidden`, and `h-full` on the grid so the row has fixed height and only the chat list scrolls.
- **AppShell (dashboard):** The shell wrapper must be `h-[100dvh] max-h-[100dvh] overflow-hidden` so it cannot grow with content; otherwise the document scrolls no matter what the pages do.
- **Page roots:** Any page that hosts a chat (company page, task page, chat page) must have `overflow-hidden` and `flex-1 min-h-0` on its root so the chat area gets a bounded height from the shell.
- **Mobile tab content:** When chat is inside tabs (e.g. Feed tab, Chat tab), the tab content wrapper must be `flex-1 min-h-0 overflow-hidden` and the chat wrapper inside it `flex-1 min-h-0 overflow-hidden` so only the list scrolls (no fixed height like `h-[calc(100dvh-12rem)]` that can exceed the viewport).
- Applies to **CompanyFeed** (social feed), **TaskChat** (task chat), **ChatClient** (Knowledge Base chat), and their page/layout wrappers, on both **mobile** and **desktop**.
